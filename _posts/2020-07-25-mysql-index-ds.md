---
layout: post
title:  "Mysql索引数据结构"
date:   2020-07-25 14:12:05 +0800
categories: database
author: heoller
introduction: Mysql索引数据结构
---

### 索引数据结构
索引就是排好序的数据结构。

* 索引数据结构不使用二叉树的原因:
    * 树的高度高，I/O次数过多
    * 二叉树可能会退化成链表
* 索引数据结构不使用红黑树的原因:
    * 数据量大的时候，树的高度不可控，I/O次数还是多
* Hash索引优缺点
    * 查询速度更快
    * 只支持等值和IN查询，不支持范围查询
    * 存在Hash冲突问题
* B-Tree数据结构:<br>
    ![B-Tree](/iholen/assets/images/B-Tree.png)
* B+Tree数据结构:<br>
    ![B+Tree](/iholen/assets/images/B+Tree.png)
* B-Tree和B+Tree的区别:
    * B+Tree非叶子节点不存储数据(优点: 每页(16K)可以存储更多的索引)，存在冗余索引。
    * B+Tree叶子节点直接通过指针连接，更好的支持区间访问。
    * B+Tree叶子节点存储所有索引字段。
* MyISAM存储引擎使用的是非聚集索引，InnoDB使用的是聚集索引(叶子节点包含完整数据)。
* MyISAM索引叶子节点存储的是数据在磁盘的地址。
* InnoDB表为什么推荐整型自增的主键？
    * 整型比较的性能更好
    * 自增可以减少页的合并和分裂
* 为什么辅助索引的叶子节点存储主键？
    * 可以节省空间，因为主键索引的叶子节点已经存储了所有数据
    * 保证数据的一致性，不需要同时维护多个索引的叶子节点数据
* 联合索引的最左前缀原则